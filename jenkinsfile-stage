pipeline {
      agent any 
      parameters {
	   string(name: 'IMAGE_TAG', defaultValue: '', description: 'Image tag to deploy')
      }
      
      environment {
	  DOCKER_IMAGE = "connectwise-rmm-agent"
          BUILD_TAG = "${env.BUILD_NUMBER}"
	  DOCKER_REPO = "ambarbhore1234"
	  KUBE_NAMESPACE = "stage"
	  
      }

      stages {
	  stage('Checkout Code') {
	     steps {
		 git branch: 'stage', url: 'https://github.com/ambarbhore777/multi-stage-pipeline.git'
	     }
	  }
	  stage('Pull Dev Image') {
	     steps {
		script {
		    sh "docker pull ${DOCKER_REPO}/${DOCKER_IMAGE}:${BUILD_TAG}"
		}
	    }
	 }
      }
}
      
